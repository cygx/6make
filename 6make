#!/usr/bin/env perl6

note "loaded script in { (now - BEGIN now).round(0.01) }s";

my constant $DIR = $?FILE.IO.parent.abspath;
my constant $PM = "$DIR/_6make.pm6";
my constant $BC = "$PM.moarvm";

BEGIN if !$BC.IO.f || $PM.IO.modified > $BC.IO.modified {
    %*ENV<SIXMAKEDIR> = $DIR;
    shell "perl6 --target=mbc --output=$BC $PM";
}

use lib $DIR;
use _6make;
